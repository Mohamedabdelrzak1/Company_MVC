@model List<UsersInRoleViewDto>

@{
    ViewData["Title"] = "Add or Remove Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="mb-4">Manage Users in Role</h2>

<form asp-action="AddOrRemoveUsers" method="post" class="border p-4 rounded shadow-sm bg-light" style="max-width: 600px;">
    <!-- مهم جدًا: إرسال roleId -->
    <input type="hidden" name="roleId" value="@ViewBag.RoleId" />

    <div class="form-group mb-3">
        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="form-check mb-2">
                <!-- إرسال UserId مخفي -->
                <input asp-for="@Model[i].UserId" type="hidden" />

                <!-- Checkbox لاختيار المستخدم -->
                <input asp-for="@Model[i].IsSelected" class="form-check-input" id="userCheck_@i" />

                <!-- Label باسم المستخدم -->
                <label for="userCheck_@i" class="form-check-label">
                    @Model[i].UserName
                </label>
            </div>
        }
    </div>

    <!-- زرار الحفظ -->
    <button type="submit" class="btn btn-primary">
        <i class="bi bi-save"></i> Save Changes
    </button>

    <!-- زر رجوع اختياري -->
    <a asp-action="Index" class="btn btn-secondary ms-2">
        <i class="bi bi-arrow-left-circle"></i> Back To Roles
    </a>
</form>
